# 文档对象模型（DOM）

## ★现有的认识

- DOM的数据结构是一颗树？
- DOM是html和JavaScript沟通（交互）的桥梁？
- JavaScript CRUD 了DOM元素，而html文档就会动态刷新，就如vue一样，data改变，自动render？

## ★DOM是什么？

1. DOM的出现是为了针对XML，在浏览器眼中，DOM就是基于XML而扩展用于HTML 的应用程序编
   程接口（API）

2. DOM做了什么？

   1. 把整个页面映射为一个多层节点结构，为此可以说，页面中的每个组成部分都是某种类型的节点，这些节点又包含着不同类型的数据

      （书中说到有XML页面这种生物，我广义理解的页面是HTML页面！）

3. 更好地理解页面？（目前你是浏览器）

   1. 按照DOM的要求来，把一个HTML文档变成一棵树，然后可以让开发者（如使用JavaScript的）借助DOM提供的API可以轻松自由地CRUD任何节点！

      ps：其实DOM提供的API（我可以说浏览器提供DOM的API吗？或许还有其它东西实现DOM，然后提供的API会比浏览器提供的要好用）并不好用！你可以使用jQuery，不过，还是Vue好使一点！

### ◇为什么要使用DOM？

#### DHTML

在IE4 和 NN4的那个年代，这个技术的出现可以让开发人员无需重新加载网页，就可以修改其外观和内容。（这难道是个类似vscode插件—Go Live「保存对页面的更改，就可以自动刷新页面了」的东西？还是说是个类似AJAX的东西？还是……）

总之，那个年代，DHTML 给 Web技术发展带来巨大进步，不过由于IE4和NN4在开发 DHTML 方面，互相看对方不顺眼，所以过去那个只编写一个 HTML 页面就能够在任何浏览器中运行的时代结束了。

在开发人员看来，Web跨平台是天性使然，如果也要想操作系统那样，那就必须得要额外多做一些工作才行啊！同一个页面，在不同浏览器里浏览，是不同的效果，显然这是猴子偷桃的行为！

就这样，此时，负责制定 Web 通信标准的 W3C开始着手规划 DOM。

#### DOM级别

1. DOM1 级（DOM Level 1）于 1998 年 10 月成为 W3C 的推荐标准。DOM1 级由两个模块组成：DOM
   核心（DOM Core）和 DOM HTML。其目标主要是映射文档的结构。

2. 相较于DOM1级，DOM2 级的目标宽泛许多，如，引入了下列新模块，**✎：**

   1.  DOM 视图（DOM Views）：定义了跟踪不同文档（例如，应用 CSS 之前和之后的文档）视图的
      接口；
   2. DOM 事件（DOM Events）：定义了事件和事件处理的接口；
   3. DOM 样式（DOM Style）：定义了基于 CSS 为元素应用样式的接口；
   4.  DOM 遍历和范围（DOM Traversal and Range）：定义了遍历和操作文档树的接口

   还有一点，DOM1 级中的 DOM 核心模块也经过扩展开始支持 XML 命名空间

3. DOM3 级则进一步扩展了 DOM

   1. 引入了以统一方式加载和保存文档的方法（什么鬼？）
   2. 新增了验证文档的方法（什么鬼？？）
   3. 对 DOM 核心进行了扩展，开始支持 XML 1.0 规范，涉及 XML Infoset、XPath和 XML Base。

一些提示，**✎：**

不是只有你家JavaScript才有DOM

> DOM 并不只是针对 JavaScript 的，很多别的语言也都实现了 DOM。不过，在 Web 浏览器中，基于 ECMAScript 实现的 DOM 的确已经成为 JavaScript 这门语言的一个重要组成部分。

DOM0级？

> 在阅读 DOM 标准的时候，读者可能会看到 DOM0 级（DOM Level 0）的字眼。实际上，DOM0 级标准是不存在的；所谓 DOM0 级只是 DOM 历史坐标中的一个参照点而已。具体说来，DOM0 级指的是 Internet Explorer 4.0 和 Netscape Navigator 4.0最初支持的 DHTML。

这个DOM0级比DOM1级要厉害得多啊！因为DOM2级在DOM1级的基础上扩充了DHTML一直都支持的一些模块。

#### 其它DOM 标准

基于XML的语言，只针对自身语言的 DOM 标准，**✎：**

1.  SVG（Scalable Vector Graphic，可伸缩矢量图）1.0；
2. MathML（Mathematical Markup Language，数学标记语言）1.0；
3. SMIL（Synchronized Multimedia Integration Language，同步多媒体集成语言）。

这几种语言的DOM标准都有 W3C 的推荐标准……反例有Mozilla 的 XUL（XML User Interface Language，XML
用户界面语言）就有自己的 DOM 实现……

#### Web 浏览器对 DOM 的支持

> 在 DOM 标准出现了一段时间之后，Web 浏览器才开始实现它

我是否可以说标准出现了，并不意味Web浏览器可以同步实时更新……这就是为什么会有兼容ES几有百分之几十的字眼……

1. IE5，首次尝试实现 DOM，但直到 IE5.5 才算是真正支持 DOM1 级。在随后的 IE6 和 IE7 中，微软都没有引入新的 DOM 功能，而到了 IE8 才对以前 DOM 实现中的 bug 进行了修复（也就是说IE8之前（包含IE8）对DOM1的实现只是几乎全部咯！）

2. Netscape 6（Mozilla 0.6.0）才开始支持 DOM。在 Netscape 7之后，Mozilla把开发重心转向了 Firefox浏览器。所以，**✎：**

   1. Firefox 3完全支持 DOM1级，几乎完全支持 DOM2级，甚至还支持 DOM3级的一部分

      （可见，标准都出了好几个版本了，浏览器连就标准都还没有实现全，所以说，标准和浏览器的实现是两回事，我的标准可以更新很快！不需要看你浏览器行事！）

一些小知识，**✎：**

> Mozilla开发团队的目标是构建与标准 100%兼容的浏览器

浏览器开发商的目标，**✎：**

那时，支持 DOM已经成为浏览器开发商的首要目标。不过，目前我想它们应该是支持HTML5为首要目标吧！

关于目前主流浏览器对 DOM 标准的支持情况，即所谓的DOM兼容性，**✎：**

**➹：**[目前各大浏览器对DOM的支持到什么程度了？ - 知乎](https://www.zhihu.com/question/21351791)

看了一些，听说，四大浏览器厂商一起反对 DOM 4.1 ，又说到W3C 历史上有过故意和厂商搞不兼容 ！

反正，IE9+搞定了1、2、3级；

总之就用chrome好了，下载个最新版的安装就好了！

---

## ★小结

- 没有想过，广义论及HTML5时，实际指的是包括HTML、[CSS](https://zh.wikipedia.org/wiki/CSS)和[JavaScript](https://zh.wikipedia.org/wiki/JavaScript)在内的一套技术组合。 这意味着学前端和学HTML5似乎没有区别
- 看了这个笔记——[深入浅出DOM基础——《DOM探索之基础详解篇》学习笔记 · Issue #9 · jawil/blog](https://github.com/jawil/blog/issues/9)，我就知道有些知识的学习是需要迭代的，只能一步步加深了，不然效率不好！
- 「标准」二字看起来就像是在说「画个大饼给你吃！」
- DOM的实现，让网页更有滋味了啊！网页的交互形式弄得好不好，关键在于你对DOM的API使用得6不6！还有就是，CSS真得是很折磨人！



---

## ★Q&A

**①什么叫API？**

按照我目前的理解就是别人提供给你用的东西……

**➹：**[设计新人必备：5分钟理解什么是API！ – Dianrong Design Center](https://ddc.dianrong.com/?p=1145)、[★应用程序接口 - 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3)、[★用大白话给你科普，到底什么是 API（应用程序编程接口）？_36氪](https://36kr.com/p/5128407.html)



**②DHTML？HTML？这二者有区别？**

**➹：**[以前的 DHTML 如今是不是也算前端？ - 知乎](https://www.zhihu.com/question/27791518)

摘录其中的一个答案，**✎：**

> DHTML 是 dynamic html 的缩写 ，这个技术在那时基本上是由微软提供的一种前端技术 。DHTML 中大多是当年 IE 所拥有的 DOM API ，可以使用VBS 或 JS 调用，在 IE 中处理 HTML 和 CSS。 
>
> 当标准化运动席卷之后，随着浏览器竞争日趋激烈，它随着非标准化 IE （老IE）逐步退出历史舞台而很少被人提及。 
>
> 按现在来说，它基本等同于浏览器端的前端开发岗位所掌握技能。可以说是前端开发的前身。前端岗位，也可以说是从它中脱胎而来。 
>
> 但是就当时来说，前端岗位（职业）还没有出现，使用 DHTML 的大部分是当时称谓的“程序员”，现在称谓的“后端” 
>
> 这个词儿在平时基本上是绝迹的，新人很多并不知道它。 

还有一些，**✎：**

1. HTML5在技术上包含了原来DHTML的所有内容

还有这个答案很关键，**✎：**

> DHTML 曾被认为是 HTML/XHTML 、CSS 和 JavaScript 相结合的产物，就像今天的 HTML5 那样，但把这些东西真正凝聚在一起的是 DOM 。如果真的需要来描述这一过程的话，“DOM 脚本程序设计”更精确，它表示使用 W3C DOM 来处理文档和样式表。 DHTML 只适用于 Web 文档，“DOM 脚本程序设计” 则涵盖了使用任何一种支持 DOM API 的程序设计语言去处理任何一种标记文档的情况。
>                                                                                          ——《JavaScript DOM编程艺术》

我也纳闷为啥书上说，由于 Netscape 和微软在开发 DHTML 方面各持己见，才有了W3C开始着手规划DOM

总之，我就认为DHTML≈HTML+CSS+JavaScript吧！然后，其中DOM的出现，让那时所谓的JavaScript开始可以跟HTML和CSS打交道！这样就不会显得孤立无援了……

至于DHTML和目前[HTML5](https://zh.wikipedia.org/wiki/HTML5)的关系，我想HTML5是DHTML的[超集](https://baike.baidu.com/item/%E8%B6%85%E9%9B%86)吧！即DHTML有的，我HTML5都有，我HTML5有的新特性，你DHTML就没有了！（在这里我把DHTML看作是旧技术或者说是没有升级的一套技术组合，用于区分Web技术时代）

**➹：**[Web 1.0、2.0、3.0 分别是什么意思？ - 知乎](https://www.zhihu.com/question/19911163)

ps：似乎这里DHTML的D有种网页特效的味道！即网页是有动态变化的！



**③DOM是什么？**

**➹：**[★XML DOM解析 基础概念 - 圣骑士wind - 博客园](http://www.cnblogs.com/mengdd/archive/2013/06/01/3112795.html)

我摘录了一些我认为重要的话（有稍微的改动），**✎：**

1. W3C制定了一套书写XML分析器的标准接口规范——**DOM**。

2. 通过DOM接口，应用程序（如JavaScript）可以在任何时候访问XML文档中的任何一部分数据，因此，这种利用DOM接口的机制也被称作**随机访问机制**（为Web开发带来了很大的灵活性）。  

3. DOM分析器**把整个XML文档转化成DOM树放在了内存**中，因此，当文档比较大或结构比较复杂时，对内存的需求就比较高。 

4. **文档代表的是数据，而DOM则代表了如何去处理这些数据。**

    **✎：**对于Web应用开发来说 ，DOM就是一个对象化的HTML数据接口，一个与语言无关、与平台无关的标准接口规范。

5. 文档（根节点）和根元素节点是两回事 
   1. 根节点代表整个文档，是我们解析XML文档的入口，通过它获取到Document对象；
   2. 根元素节点代表XML文档的根元素，必须要在获得Document对象之后才能一层一层地去访问它的元素。

6. **在DOM接口规范中，有四个基本的接口：Document, Node, NodeList, NamedNodeMap。** 

7. 元素节点还是可以有属性的唯一类型的节点 

8. **文档（根节点）** ：文档节点是整个文档中所有其他节点的父节点。（**根节点不等于根元素节点**） 

**➹：**[★DOM 是什么？ - 知乎](https://www.zhihu.com/question/34219998)

触不及防的理解，**✎：**

1. **站高一个维度去理解问题 （如DOM是什么）！** 

   **✎：**站在浏览器的角度来思考 ——解析文档，建模成对象模型，开放API接口 

   ps：在使用MVC阻止JavaScript demo的时候，站在一个文件里，即一个模块里看的话，就这样简单定义3个对象就好了，可如果站出来，从多个文件的角度去看的话，会有很多重复demo！为此会有了叫面向对象的编程思想，即把共有的demo抽象成一个类，然后对象就按照这个类（模板）刷（new）出来……

2. 普通文档（`*.txt`）和HTML/XML文档（`*.html/*.xml`）的区别仅仅是因为后者是有组织的结构化文件 

3. 父亲的父亲以及上溯十八代祖宗叫做祖先节点。儿子的儿子以及子子孙孙无穷匮也叫做后代节点。



**④什么是接口规范？**

我在学Java的时候，就遇到过一个叫面向接口编程的思想，接口是100%抽象的！它没有具体的实现，只有抽象的功能罗列……这是我对Java接口的认识，可什么是接口规范呢？或者说是接口标准？

**➹：**[什么是接口文档，如何写接口，有什么规范？ - 知乎](https://www.zhihu.com/question/52409287)

这个有格式，好看一些，**✎：**

**➹：**[接口规范，什么是接口规范？](http://blog.leanote.com/post/basky/%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83%EF%BC%8C%E4%BB%80%E4%B9%88%E4%BA%8B%E6%8E%A5%E5%8F%A3%E8%A7%84%E8%8C%83%EF%BC%9F)

可有，**✎：**

1. 接口文档？——前后端共同定义的接口文档，用于解决前后端甩锅、撕逼等问题
2. 前后端需要根据这个接口文档进行开发，到项目结束前都要一直维护 
3. 为什么要有接口文档？——为了沟通交流开发！为了项目维护或者该项目有人离职了，招了你，需要你来背锅！为此得要有个开发文档！（开发文档和接口文档有区别？）
4. 接口规范有啥？——有四部分：方法、uri、请求参数、返回参数 ，总之就是与后端交互的一种书面语吧！诸如有这样的一些字眼——你必须得这样来，不然我就不干了！不然我就甩锅给你了！

ps：关于接口，之前有用过leancloud——它把后台封装了，提供了一些接口（是否可以理解为一些API？），让我们可以使用JavaScript实现对数据库 CRUD等操作！



**⑤DOM视图是什么鬼？**

**➹：**[编辑 DOM  |  Tools for Web Developers  |  Google Developers](https://developers.google.com/web/tools/chrome-devtools/inspect-styles/edit-dom?hl=zh-cn)

看了第一句，**✎：**

> Chrome DevTools 的 Elements 面板中的 DOM 树视图可以显示当前网页的 DOM 结构。通过 DOM 更新实时修改页面的内容和结构。 

难怪使用了JavaScript操作DOM后，不用刷新页面，网页内容和结构就会发生变化。

我们的html文件需要经过浏览器解析渲染后，才能以网页的形式浏览的！在这里的DOM树视图就是你用 `E12`打开开发者工具→☞ `Elements`下看到的东西！



**⑥DOM3级和事件不得不说的故事？**

**➹：**[[JavaScript] DOM3级与事件一 – 技术学习小组](http://blog.qiji.tech/archives/9339)



**⑦文档对象模型、DOM事件模型，这里的「模型」二字指的是什么？**

**➹：**[模型 - 维基百科，自由的百科全书](https://zh.wikipedia.org/wiki/%E6%A8%A1%E5%9E%8B)
「模型」给我的第一感觉就是「这个东西必须按这样来」！

模型化有一种「抽象简化」的味道

记得看过某个视频，其中说到，把现实问题转化成数学问题，然后再转化成编程问题！

**➹：**[编程和数学建模的区别是什么？ | 问答 | 问答 | 果壳网 科技有意思](https://www.guokr.com/question/460622/)

看似很有道理的答案，似乎总有不妥之处！有时候一个问题的描述，比解决一个问题更难！

如果只看「建模」二字的话，百度百科的解释这样的，**✎：**

> 建模就是建立模型，就是为了理解事物而对事物做出的一种[抽象](https://baike.baidu.com/item/%E6%8A%BD%E8%B1%A1/9021828)，是对事物的一种无歧义的书面描述。 

JavaScript想要操作html文档，可是没有途径。那好吧！你JavaScript无法操作html文档是吧？那身为大哥的我浏览器只好勉为其难的帮你把html文档抽象成你能操作的样子了，即对html文档建模。身为大哥的我浏览器具体做法就是，**✎：**

1. 解析html文档，建模成对象模型，开放API接口。

身为小弟的你 JavaScript，使用这些开放的API接口就可以了，我捣鼓出来的DOM，其接口规范中**有四个基本的接口：Document, Node, NodeList, NamedNodeMap。** 你看着办咯！

ps：DOM 只是一个接口规范，可以用各种语言实现 ！就像是Java的接口概念一样（感觉像是一个意思！100%的抽象，功能的罗列），所以你JavaScript 对 W3C制定的DOM 标准实现 的那些所谓的「DOM API」只能适用于你JavaScript这门语言！

**➹：** [★DOM 模型概述 -- JavaScript 标准参考教程（alpha）](https://javascript.ruanyifeng.com/dom/node.html)


话说，什么叫书面描述？——[找不到答案](https://zhidao.baidu.com/question/566346653847373644.html)

拆解，[书面语](https://baike.baidu.com/item/%E4%B9%A6%E9%9D%A2%E8%AF%AD)为何意？**✎：**

> 书面语，是指用文字记载下来供“看”的语言，它在[口语](https://baike.baidu.com/item/%E5%8F%A3%E8%AF%AD)的基础上形成，使听说的语言符号系统变为“看”的语言符号系统。书面语是在口语的基础上产生的，是口语的加工形式，所以两者基本上是一致的。 
>
> 由于书面语是人们在文本上交流所使用的语言，相对于口语，有其内在的稳定性。这体现在空间与时间两个跨度上。 

如，书面语：一元五角；口语：一块五

总之书面语，有种稳定特质，那么关联到「建模是对事物的一种无歧义的书面描述」这句话，无歧义和书面描述有念重叠的「味道」，那么我直接就认为建模是对事物的一比一的抽象？可是抽象不是意味这简化吗？还如何无歧义？这里的无歧义指的是什么呢？

果壳的那个答案说到，关于数学建模，**✎：**

> 再精细的模型，只可能一步一步逼近这个现实，**但它永远不可能等于现实**。 所以检验一个模型的精度是否达到我们可以接受的范围，是否是现阶段我们能合理使用的，最可靠的方法就是输入足够多的参数去检验得到的结果与现实情况差别有多大。 

此刻，我已经不知道我的问题到底是什么了。

摘录几个果壳的答案，**✎：**



霍达敢达，**✎：**

> 1. 数学建模是对实际问题的数学解释化，即**将实际问题转换成能用数学解决的问题** 。
> 2. 有时候你建立一个很好的模型，很多时候你需要用**编程来实现，拟合，仿真，计算，这是编程需要做的事情**。 



孤狐无悔，**✎：**

> 我认为本质上，
>
> 1. “**建模**”是我们**理解问题和分析问题的一个工具**，通过这一工具，我们将实际问题简化，使其“可计算”。
> 2. “**编程**”是一个纯粹的**计算工具**，这一工具不会帮助我们我们理解和分析问题，只是用来“计算”。
>
> 特别需要强调的是，**“编程”适合用来处理“重复性”的计算**，附带也可以做一些其他**重复性**的工作（例如输入、输出、排版之类）。

老实说，这第二点有毒啊！数据结构和算法分析，不是编程的一部分吗？

然后又有了进一步的补充，**✎：**

> 说到编程，现在比较流行的理论，将其分为5部分。
> 需求分析，程序设计，编写代码，测试发布，技术支持。
> 其中“程序设计”部分，就是“提出一个解决方案”，建模一般都是包括在这里面的，画流程图也是这里面。
> 而“编写代码”，则是实现这一解决方案。
>
> 你所说的“大量理论与技巧性的工作”，其实大部分都是属于“程序设计”那一部分的，编写代码只要掌握一定的技巧，其实是相当简单的事情。——这就是为什么越高级的程序员，所需要写的代码越少——代码都可以交给低级程序员来写，高级程序员只需要负责设计就可以

> 程序设计“的时候需要用到的知识很多，尤其是需要很多数学方面的知识。等到开始写代码的时候，需要的东西就少多了。
> 另外相信我，编程中，”需求分析“这部分才是最难的。

之前，看王垠的博客，其中有讲到过，数学对编程并不重要！我不知道他说的编程指的是什么，如果我根据孤狐无悔的阐述的话，我认为王垠所认为的编程是与建模区分的！这才让数学显得不重要！

愈发觉得，如何把零碎的知识点关联起来，是件极其让人头疼的事儿！比如说，有些内容曾经自认为理解过，然而大部分这些内容只会对当时理解的上下文有用，换了一个上下文，就很难有代入感了。

总之，对学过的知识，就得要不断回顾，不断更新对它已有的理解！比如说，在这里我又重新了认识了编程，之前我的编程的理解就是「输入、计算、输出，然后如此循环，即所谓的编写代码，毕竟脑海中只有定义变量的数据结构，然后为想要的结果开一条路出来，仅此而已。总之就是一个点」，而现在的认识则是所谓的「软件工程」



**⑧编程和数学建模的区别是什么？** 

先试着相信一个答案，**✎：**

> 这俩区别还是挺大的。 编程需要建立在建模基础上进行。 简而言之，就是假设我们需要让计算机帮助我们做一件比较复杂的事，建模的过程就是我们自己想明白该怎么办，而编程则是在自己想清楚的基础上，通过语言告诉计算机应该怎么算。 

建模：伪码，自己看，自己的语言

编程：规范自己的语言，即像编程语言转化，让计算机能看懂，还得要告诉计算机怎么算，最后算出结果

有人问，**✎：**

> 编程要用到算法，数据结构，这个过程也包括建模吧？ 

有人回答，**✎：**

> 两个完全不是一个层面东西. 数据结构和算法主要针对计算机运行时候的优化和资源分配. 建模的对象是你要研究的东西.

总之，在你编程的时候，要想清楚搞什么，怎么搞，然后再让计算机帮你搞事情，前提是计算机是能搞定的！




